<!DOCTYPE html>
<html>
<head>
  <title>S3 Word Game!</title>
  <link href="css/hello.css" media="screen" rel="stylesheet" type="text/css" />

  <!--<script type="text/javascript" src="http://crypto-js.googlecode.com/files/2.0.0-crypto-sha1.js"></script>-->
  <script src="js/deps/md5.js" type="text/javascript"></script>
  <script src="js/deps/base64.js" type="text/javascript"></script>

  <script src="js/deps/strophe.js" type="text/javascript"></script>

  <script src="js/deps/jquery-1.4.2.js" type="text/javascript"></script>
  <script src="js/deps/jquery-ui-1.8.2.custom.min.js" type="text/javascript"></script>

  <script src="js/deps/jquery.url.js" type="text/javascript"></script>

  <script src="js/sail.js/sail.rollcall.js" type="text/javascript"></script>

  <script src="js/sail.js/sail.strophe.js" type="text/javascript"></script>

  <script src="js/game.js" type="text/javascript"></script>

  <meta name="csrf-param" content="authenticity_token"/>
</head>
<body>
	<div id="dfn" style="font-size: 32px; font-weight: bold; text-align: center">
	</div>
    
    <script type='text/javascript'>
        $(document).ready(function(){
          	Sail.Strophe.onConnectSuccess = function() {
		    groupchat = Sail.Strophe.joinGroupchat('s3@conference.proto.encorelab.org')

		    groupchat.addHandler(function(msg) {
				data = parseMsg(msg)
				
				if(data.type == 'definition') {
		      		$('#dfn').html(data.content)
				}
		    })

		    $('#send').click(function() {
		      text = $('#chatinput')
		      groupchat.sendText(text.val())
		      text.val("")
		    })
		  } 
        })
    </script>
    
</body>
</html>
